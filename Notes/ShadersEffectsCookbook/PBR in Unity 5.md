# Physical Based Rendering in Unity 5

Unity 5 implements PBR by introducing two important changes . The first is a completely new lighting model (called **Standard**) . Surface Shaders allow developers to specify the physical properties of a material , but they do not impose actual physical constraints on them . PBR fills this gap using a lighting model that enforces principles of physics such as **energy conservation** (an object cannot reflect more light than the amount it receives) , **microsurface scattering** (rough surfaces reflect light more erratically compared to smooth ones) , **Fresnel reflectance** (specular reflections appear at grazing angles) , and **surface occlusion** (the darking of corners and other geometries that are hard to light) . All these aspects , and many others , are used to calculate the Standard lighting model . The second aspect that makes PBR so realistic is called **Global Illumination (GI)** and is the simulation of physically-based light transport . It means that objects are not drawn in the scene as if they were separate entities . They all contribute to the final rendering as light can reflect on them before hitting something else . This aspect is not captured in the shaders themselves but is an essential part of how the rendering engine works . Unfortunately , accurately simulating how light rays actually bounce over surfaces in real time is beyond the capabilities of modern GPUs . Unity 5 makes some clever optimizations that allow retaining visual fidelity without sacrificing performance . Some of the most advanced techniques (such as reflections) , however , require the user input . It is important to remember that PBR and GI do not automatically guarantee that your game will be photorealistic . Achieving photorealism is a very challenging task and , like every art , it requires great expertize and exceptional skills .

## Understanding the metallic setup

Unity 5 provides two different types of PBR shaders ; they are referred to in the drop-down menu of the material's inspector tab as **Standard** and **Standard (Specular setup)** . The main difference is that the former exposes the **Metallic** property , while the latter replaces it with **Specular** . Both these metallic and specular setups represent different ways in which one can initialize PBR materials . One of the concepts that has driven PBR is the ability to provide meaningful , physically-related properties that artists and developers can tweak and play with . The properties of some materials are easier to represent indicating how **metallic** they are , while for some , the other is more important in order to define how they reflect lights directly . If you have used Unity 4 in the past , **Standard (Specular setup)** might look more familiar to you . This recipe will show you to use the **metallic setup** effectively . It's important to remember that the metallic workflow is not just for metallic materials ; it is a way to define how materials will look according to how metallic or non-metallic their surface is . 

## How to do it ...

There are two main textures that need to be configured in the Standard Shader : **Albedo** and **Metallic** . To use the metallic workflow effectively , we need to initialize these maps correctly :

1. The **Albedo** map should be initialized with the unlit texture of the 3D model .
2. To create the **Metallic** map , start by duplicating the file for your **Albedo** map . You can do this by selecting the map from the Project tab and pressing Ctrl + D .
3. Use white (#ffffff) to color the regions of the map that correspond to materials that are made of pure metal . Use black (#000000) for all the other colors . Shades of grey should be used for dusty , weathered , or worn out metal suffaces , rust , scratched paint , and so on . As a matter of fact , Unity uses only the red channel to store the metallic value ; the green and blue ones are ignored .
4. Use the alpha channel of the image to provide information about the **Smoothness** of the material .
5. Assign the **Metallic** map to the material . Both **Metallic** and **Smoothness** sliders will disappear as these two properties are now controlled by the map .

## How it works ...

Legacy Shaders allow artists to create materials that easily break the illusion of photorealism by having lighting conditions that are impossible in reality . This happens because all the properties of a material exposed in a Legacy Surface Shader are uncorrelated . By introducing the metallic workflow , Unity 5 imposes more constraints on the way objects look , making it harder for artists to create illogical materials . 

Metals are known for the conducting of electricity ; light is in the form of electromagnetic waves , meaning that almost all metals behave in a similar way compared to non-conductors (often referred as insulators) . Conductors tend to reflect most photons (70 - 100%) , resulting in high reflectance . The remaining light is absorbed , rather than diffused , suggesting that conductors have a very dark diffuse component . Insulators , conversely , have a low reflectance (4%) ; the rest of the light is scattered on the surface , contributing to their diffused looks .

In the Standard Shader , purely metallic materials have dark diffuse components and the color of their specular reflections is determined by the **Albedo** map . Conversely , the diffuse component of purely non-metallic materials is determined by the **Albedo** map ; the color of their specular highlights is determined by the color of the incoming light . Following these principles allows the metallic workflow to combine the albedo and specular into the **Albedo** map , enforcing physically-accurate behaviors . This also allows saving more space , resulting in a significant speed up at the expenses of reduced control over the look of your materials .



